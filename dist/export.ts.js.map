{"version":3,"file":"export.ts.js","sources":["../src/cli/export.ts"],"sourcesContent":["import { exporter as _exporter } from '../api/export';\nimport * as colors from 'ansi-colors';\nimport prettyBytes from 'pretty-bytes';\nimport { locations } from '../config';\n\nexport function exporter(export_dir: string, { basepath = '' }) {\n\treturn new Promise((fulfil, reject) => {\n\t\ttry {\n\t\t\tconst emitter = _exporter({\n\t\t\t\tbuild: locations.dest(),\n\t\t\t\tdest: export_dir,\n\t\t\t\tbasepath\n\t\t\t});\n\n\t\t\temitter.on('file', event => {\n\t\t\t\tconsole.log(`${colors.bold.cyan(event.file)} ${colors.gray(`(${prettyBytes(event.size)})`)}`);\n\t\t\t});\n\n\t\t\temitter.on('failure', event => {\n\t\t\t\tconsole.log(`${colors.red(`> Received ${event.status} response when fetching ${event.pathname}`)}`);\n\t\t\t});\n\n\t\t\temitter.on('error', event => {\n\t\t\t\treject(event.error);\n\t\t\t});\n\n\t\t\temitter.on('done', event => {\n\t\t\t\tfulfil();\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tconsole.log(`${colors.bold.red(`> ${err.message}`)}`);\n\t\t\tprocess.exit(1);\n\t\t}\n\t});\n}"],"names":["_exporter","locations","colors.bold","colors.gray","colors.red"],"mappings":";;;;;;;;;;;;;;;;;;;;;;kBAKyB,UAAkB,EAAE,EAAiB;QAAf,gBAAa,EAAb,kCAAa;IAC3D,OAAO,IAAI,OAAO,CAAC,UAAC,MAAM,EAAE,MAAM;QACjC,IAAI;YACH,IAAM,OAAO,GAAGA,kBAAS,CAAC;gBACzB,KAAK,EAAEC,mBAAS,CAAC,IAAI,EAAE;gBACvB,IAAI,EAAE,UAAU;gBAChB,QAAQ,UAAA;aACR,CAAC,CAAC;YAEH,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,UAAA,KAAK;gBACvB,OAAO,CAAC,GAAG,CAAIC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAIC,WAAW,CAAC,MAAI,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,MAAG,CAAG,CAAC,CAAC;aAC9F,CAAC,CAAC;YAEH,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,UAAA,KAAK;gBAC1B,OAAO,CAAC,GAAG,CAAC,KAAGC,UAAU,CAAC,gBAAc,KAAK,CAAC,MAAM,gCAA2B,KAAK,CAAC,QAAU,CAAG,CAAC,CAAC;aACpG,CAAC,CAAC;YAEH,OAAO,CAAC,EAAE,CAAC,OAAO,EAAE,UAAA,KAAK;gBACxB,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACpB,CAAC,CAAC;YAEH,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,UAAA,KAAK;gBACvB,MAAM,EAAE,CAAC;aACT,CAAC,CAAC;SACH;QAAC,OAAO,GAAG,EAAE;YACb,OAAO,CAAC,GAAG,CAAC,KAAGF,WAAW,CAAC,GAAG,CAAC,OAAK,GAAG,CAAC,OAAS,CAAG,CAAC,CAAC;YACtD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SAChB;KACD,CAAC,CAAC;CACH;;;;"}